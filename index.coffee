# =============================================================================
# Server
# =============================================================================

# -----------------------------------------------------------------------------
# Dependencies
# -----------------------------------------------------------------------------

body_parser = require "body-parser"
express = require('express')
app = express()
router = express.Router()
port = process.env.PORT || 3000

# -----------------------------------------------------------------------------
# Configuration
# -----------------------------------------------------------------------------

(->
  @use body_parser.urlencoded extended: true
  @use body_parser.json()
  @use '/', router
).apply app

# -----------------------------------------------------------------------------
# Routes
# -----------------------------------------------------------------------------

(->
  @post '/score', (req, res) ->
    res.json {foo: "bar"}
).apply router

# -----------------------------------------------------------------------------
# Initialization
# -----------------------------------------------------------------------------

(->
  @listen port, -> console.log("Listening on port #{port}")
).apply app
